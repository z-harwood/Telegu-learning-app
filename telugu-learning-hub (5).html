<html lang="en"><head><script>(function(firebaseConfig, initialAuthToken, appId) {
        window.__firebase_config = firebaseConfig;
        window.__initial_auth_token = initialAuthToken;
        window.__app_id = appId;
            })("\n{\n  \"apiKey\": \"AIzaSyCqyCcs2R2e7AegGjvFAwG98wlamtbHvZY\",\n  \"authDomain\": \"bard-frontend.firebaseapp.com\",\n  \"projectId\": \"bard-frontend\",\n  \"storageBucket\": \"bard-frontend.firebasestorage.app\",\n  \"messagingSenderId\": \"175205271074\",\n  \"appId\": \"1:175205271074:web:2b7bd4d34d33bf38e6ec7b\"\n}\n","eyJhbGciOiJSUzI1NiIsImtpZCI6IjcwN2Q5NzI1ZGNkZmEzM2ViMTkxYzg0Njg0Y2JmMjhjYTY0NWFmMDYiLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiJmaXJlYmFzZS1hZG1pbnNkay1mYnN2Y0BiYXJkLWZyb250ZW5kLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwiYXVkIjoiaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vZ29vZ2xlLmlkZW50aXR5LmlkZW50aXR5dG9vbGtpdC52MS5JZGVudGl0eVRvb2xraXQiLCJ1aWQiOiIwMDc1Mzk4ODU4MDg2MjYzNjg5NiIsImlzcyI6ImZpcmViYXNlLWFkbWluc2RrLWZic3ZjQGJhcmQtZnJvbnRlbmQuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJjbGFpbXMiOnsiYXBwSWQiOiJjX2E3MDQ0NGFhM2RlOThhNDhfaW5kZXguaHRtbC0yNzcifSwiZXhwIjoxNzU4OTI5MDc2LCJpYXQiOjE3NTg5MjU0NzYsImFsZyI6IlJTMjU2In0.NI5FgSmXekC5gAJHS8APqf50LLHZBMWfg3nnT1PwH-plBm4NL3UUhPoP0YNKNhwHCXSfAyyfSGRtU_sWMvT6TWdCMyOd3ClVAqd26jtqtDOYwHF6uGm4UEUePM4XEsHuhPkkCD3vslUVyFgW0WAQZh-nLQdeBqDvwWWTQCV4X168pLotoH3pFo1oamlKSMUVDg6BgKsjtoWZazIyY1Oy-hnWf7wX5ooG6GotyFeM7rGkGQ-JsAytZ290VU5Rgm23u4-v2otJGX7me_pGziMReGT1OeJvu-x3UKB8MzCGjaVwpD6CAvyyUnRHL0MSBM7emsYjZJ5CwtgHqPCBVKMLjA","c_a70444aa3de98a48_index.html-277")</script><script>'use strict';var h=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};function l(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");}var n=l(this);
function p(a,b){if(b)a:{var d=n;a=a.split(".");for(var c=0;c<a.length-1;c++){var e=a[c];if(!(e in d))break a;d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&b!=null&&h(d,a,{configurable:!0,writable:!0,value:b})}}function r(a){function b(c){return a.next(c)}function d(c){return a.throw(c)}return new Promise(function(c,e){function f(g){g.done?c(g.value):Promise.resolve(g.value).then(b,d).then(f,e)}f(a.next())})}function t(a){return r(a())}
p("Object.values",function(a){return a?a:function(b){var d=[],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&d.push(b[c]);return d}});p("Array.prototype.includes",function(a){return a?a:function(b,d){var c=this;c instanceof String&&(c=String(c));var e=c.length;d=d||0;for(d<0&&(d=Math.max(d+e,0));d<e;d++){var f=c[d];if(f===b||Object.is(f,b))return!0}return!1}});/*

 MIT License

 Copyright (c) 2017-2023 W.Y.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.

*/
function u(a,b){const d=a.style;b.backgroundColor&&(d.backgroundColor=b.backgroundColor);b.width&&(d.width=`${b.width}px`);b.height&&(d.height=`${b.height}px`);const c=b.style;c!=null&&Object.keys(c).forEach(e=>{d[e]=c[e]})};var v=(()=>{let a=0;return()=>{a+=1;return`u${`0000${(Math.random()*1679616<<0).toString(36)}`.slice(-4)}${a}`}})();function w(a){const b=[];for(let d=0,c=a.length;d<c;d++)b.push(a[d]);return b}let x=null;function y(a={}){return x?x:a.l?x=a.l:x=w(window.getComputedStyle(document.documentElement))}function z(a,b){return(a=(a.ownerDocument.defaultView||window).getComputedStyle(a).getPropertyValue(b))?parseFloat(a.replace("px","")):0}
function A(a,b={}){var d;if(!(d=b.width)){d=z(a,"border-left-width");var c=z(a,"border-right-width");d=a.clientWidth+d+c}(b=b.height)||(b=z(a,"border-top-width"),c=z(a,"border-bottom-width"),b=a.clientHeight+b+c);return{width:d,height:b}}function B(a){return new Promise((b,d)=>{const c=new Image;c.onload=()=>{c.decode().then(()=>{requestAnimationFrame(()=>b(c))})};c.onerror=d;c.crossOrigin="anonymous";c.decoding="async";c.src=a})}
function C(a){return t(function*(){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(a)).then(encodeURIComponent).then(b=>`data:image/svg+xml;charset=utf-8,${b}`)})}
function D(a,b,d){return t(function*(){const c=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");c.setAttribute("width",`${b}`);c.setAttribute("height",`${d}`);c.setAttribute("viewBox",`0 0 ${b} ${d}`);e.setAttribute("width","100%");e.setAttribute("height","100%");e.setAttribute("x","0");e.setAttribute("y","0");e.setAttribute("externalResourcesRequired","true");c.appendChild(e);e.appendChild(a);return C(c)})}
var E=(a,b)=>{if(a instanceof b)return!0;a=Object.getPrototypeOf(a);return a===null?!1:a.constructor.name===b.name||E(a,b)};function F(a,b){return y(b).map(d=>{const c=a.getPropertyValue(d),e=a.getPropertyPriority(d);return`${d}: ${c}${e?" !important":""};`}).join(" ")}
function G(a,b,d,c){a=window.getComputedStyle(a,d);var e=a.getPropertyValue("content");if(e!==""&&e!=="none"){var f=v();try{b.className=`${b.className} ${f}`}catch(k){return}e=document.createElement("style");var g=e.appendChild;d=`.${f}:${d}`;a.cssText?(c=a.getPropertyValue("content"),c=`${a.cssText} content: '${c.replace(/'|"/g,"")}';`):c=F(a,c);g.call(e,document.createTextNode(`${d}{${c}}`));b.appendChild(e)}};function H(a){return a.search(/^(data:)/)!==-1}function I(a,b,d){return t(function*(){const c=yield fetch(a,b);if(c.status===404)throw Error(`Resource "${c.url}" not found`);const e=yield c.blob();return new Promise((f,g)=>{const k=new FileReader;k.onerror=g;k.onloadend=()=>{try{f(d({o:c,result:k.result}))}catch(m){g(m)}};k.readAsDataURL(e)})})}const J={};function K(a,b,d){let c=a.replace(/\?.*/,"");d&&(c=a);/ttf|otf|eot|woff2?/i.test(c)&&(c=c.replace(/.*\//,""));return b?`[${b}]${c}`:c}
function L(a,b,d){return t(function*(){const c=K(a,b,d.C);if(J[c]!=null)return J[c];d.u&&(a+=(/\?/.test(a)?"&":"?")+(new Date).getTime());let e;try{const f=yield I(a,d.i,({o:g,result:k})=>{b||(b=g.headers.get("Content-Type")||"");return k.split(/,/)[1]});e=`data:${b};base64,${f}`}catch(f){e=d.B||""}return J[c]=e})};const M={P:"application/font-woff",R:"application/font-woff",N:"application/font-truetype",v:"application/vnd.ms-fontobject",H:"image/png",F:"image/jpeg",D:"image/jpeg",A:"image/gif",M:"image/tiff",L:"image/svg+xml",O:"image/webp"};function N(a){return(a=/\.([^./]*?)$/g.exec(a))?a[1]:""};function O(a){return t(function*(){const b=a.toDataURL();return b==="data:,"?a.cloneNode(!1):B(b)})}function aa(a,b){return t(function*(){if(a.currentSrc){var d=document.createElement("canvas");const c=d.getContext("2d");d.width=a.clientWidth;d.height=a.clientHeight;c==null||c.drawImage(a,0,0,d.width,d.height);d=d.toDataURL();return B(d)}d=a.poster;d=yield L(d,M[N(d).toLowerCase()]||"",b);return B(d)})}
function ba(a,b){return t(function*(){try{let d;if(a==null?0:(d=a.contentDocument)==null?0:d.body)return yield P(a.contentDocument.body,b,!0)}catch(d){}return a.cloneNode(!1)})}function ca(a,b){return t(function*(){return E(a,HTMLCanvasElement)?O(a):E(a,HTMLVideoElement)?aa(a,b):E(a,HTMLIFrameElement)?ba(a,b):a.cloneNode(a.tagName!=null&&a.tagName.toUpperCase()==="SVG")})}
function da(a,b,d){return t(function*(){if(b.tagName!=null&&b.tagName.toUpperCase()==="SVG")return b;let c=[];if(a.tagName!=null&&a.tagName.toUpperCase()==="SLOT"&&a.assignedNodes)c=w(a.assignedNodes());else{let e;if(E(a,HTMLIFrameElement)&&((e=a.contentDocument)==null?0:e.body))c=w(a.contentDocument.body.childNodes);else{let f;c=w(((f=a.shadowRoot)!=null?f:a).childNodes)}}if(c.length===0||E(a,HTMLVideoElement))return b;yield c.reduce((e,f)=>e.then(()=>P(f,d)).then(g=>{g&&b.appendChild(g)}),Promise.resolve());
return b})}function ea(a,b,d){const c=b.style;if(c){var e=window.getComputedStyle(a);e.cssText?(c.cssText=e.cssText,c.transformOrigin=e.transformOrigin):y(d).forEach(f=>{let g=e.getPropertyValue(f);f==="font-size"&&g.endsWith("px")&&(g=`${Math.floor(parseFloat(g.substring(0,g.length-2)))-.1}px`);E(a,HTMLIFrameElement)&&f==="display"&&g==="inline"&&(g="block");f==="d"&&b.getAttribute("d")&&(g=`path(${b.getAttribute("d")})`);c.setProperty(f,g,e.getPropertyPriority(f))})}}
function fa(a,b){E(a,HTMLSelectElement)&&(b=Array.from(b.children).find(d=>a.value===d.getAttribute("value")))&&b.setAttribute("selected","")}
function ha(a,b){return t(function*(){var d=a.querySelectorAll?a.querySelectorAll("use"):[];if(d.length===0)return a;var c={};for(var e=0;e<d.length;e++){var f=d[e].getAttribute("xlink:href");if(f){const g=document.querySelector(f);a.querySelector(f)||!g||c[f]||(c[f]=yield P(g,b,!0))}}d=Object.values(c);if(d.length){c=document.createElementNS("http://www.w3.org/1999/xhtml","svg");c.setAttribute("xmlns","http://www.w3.org/1999/xhtml");c.style.position="absolute";c.style.width="0";c.style.height="0";
c.style.overflow="hidden";c.style.display="none";e=document.createElementNS("http://www.w3.org/1999/xhtml","defs");c.appendChild(e);for(f=0;f<d.length;f++)e.appendChild(d[f]);a.appendChild(c)}return a})}
function P(a,b,d){return t(function*(){return d||!b.filter||b.filter(a)?Promise.resolve(a).then(c=>ca(c,b)).then(c=>da(a,c,b)).then(c=>{E(c,Element)&&(ea(a,c,b),G(a,c,":before",b),G(a,c,":after",b),E(a,HTMLTextAreaElement)&&(c.textContent=a.value),E(a,HTMLInputElement)&&c.setAttribute("value",a.value),fa(a,c));return c}).then(c=>ha(c,b)):null})};const Q=/url\((['"]?)([^'"]+?)\1\)/g,ia=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ja=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ka(a){const b=[];a.replace(Q,(d,c,e)=>{b.push(e);return d});return b.filter(d=>!H(d))}
function la(a,b,d,c){return t(function*(){try{const e=d?(new URL(b,d||void 0)).toString():b;let f;f=yield L(e,M[N(b).toLowerCase()]||"",c);return a.replace(new RegExp(`(url\\(['"]?)(${b.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")})(['"]?\\))`,"g"),`$1${f}$3`)}catch(e){}return a})}function ma(a,{I:b}){return b?a.replace(ja,d=>{for(;;){const [c,,e]=ia.exec(d)||[],f=c,g=e;if(!g)return"";if(g===b)return`src: ${f};`}}):a}
function R(a,b,d){return t(function*(){if(a.search(Q)===-1)return a;const c=ma(a,d);return ka(c).reduce((e,f)=>e.then(g=>la(g,f,b,d)),Promise.resolve(c))})};function S(a,b,d){return t(function*(){var c;const e=(c=b.style)==null?void 0:c.getPropertyValue(a);return e?(c=yield R(e,null,d),b.style.setProperty(a,c,b.style.getPropertyPriority(a)),!0):!1})}function na(a,b){return t(function*(){(yield S("background",a,b))||(yield S("background-image",a,b));(yield S("mask",a,b))||(yield S("-webkit-mask",a,b))||(yield S("mask-image",a,b))||(yield S("-webkit-mask-image",a,b))})}
function oa(a,b){return t(function*(){const d=E(a,HTMLImageElement);if(d&&!H(a.src)||E(a,SVGImageElement)&&!H(a.href.baseVal)){var c=d?a.src:a.href.baseVal,e=yield L(c,M[N(c).toLowerCase()]||"",b);yield new Promise((f,g)=>{a.onload=f;a.onerror=b.m?(...k)=>{try{f(b.m(...k))}catch(m){g(m)}}:g;a.decode&&(a.decode=f);a.loading==="lazy"&&(a.loading="eager");d?(a.srcset="",a.src=e):a.href.baseVal=e})}})}
function pa(a,b){return t(function*(){const d=w(a.childNodes).map(c=>T(c,b));yield Promise.all(d).then(()=>a)})}function T(a,b){return t(function*(){E(a,Element)&&(yield na(a,b),yield oa(a,b),yield pa(a,b))})};const U={};function V(a){return t(function*(){var b=U[a];if(b!=null)return b;b=yield(yield fetch(a)).text();b={url:a,cssText:b};return U[a]=b})}function W(a,b){return t(function*(){let d=a.cssText;const c=/url\(["']?([^"')]+)["']?\)/g,e=(d.match(/url\([^)]+\)/g)||[]).map(f=>t(function*(){let g=f.replace(c,"$1");g.startsWith("https://")||(g=(new URL(g,a.url)).href);return I(g,b.i,({result:k})=>{d=d.replace(f,`url(${k})`);return[f,k]})}));return Promise.all(e).then(()=>d)})}
function X(a){if(a==null)return[];const b=[];a=a.replace(/(\/\*[\s\S]*?\*\/)/gi,"");for(var d=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){var c=d.exec(a);if(c===null)break;b.push(c[0])}a=a.replace(d,"");d=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi;for(c=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){let e=d.exec(a);if(e===null)if(e=c.exec(a),e===null)break;else d.lastIndex=c.lastIndex;else c.lastIndex=
d.lastIndex;b.push(e[0])}return b}
function qa(a,b){return t(function*(){const d=[],c=[];a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach((f,g)=>{if(f.type===CSSRule.IMPORT_RULE){let k=g+1;f=V(f.href).then(m=>W(m,b)).then(m=>X(m).forEach(q=>{try{e.insertRule(q,q.startsWith("@import")?k+=1:e.cssRules.length)}catch(Da){}})).catch(()=>{});c.push(f)}})}catch(f){const g=a.find(k=>k.href==null)||document.styleSheets[0];e.href!=null&&c.push(V(e.href).then(k=>W(k,b)).then(k=>X(k).forEach(m=>{g.insertRule(m,g.cssRules.length)})).catch(()=>
{}))}});return Promise.all(c).then(()=>{a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach(f=>{d.push(f)})}catch(f){}});return d})})}function ra(a){return a.filter(b=>b.type===CSSRule.FONT_FACE_RULE).filter(b=>b.style.getPropertyValue("src").search(Q)!==-1)}function sa(a,b){return t(function*(){if(a.ownerDocument==null)throw Error("Provided element is not within a Document");var d=w(a.ownerDocument.styleSheets);d=yield qa(d,b);return ra(d)})}
function ta(a){function b(c){(c.style.fontFamily||getComputedStyle(c).fontFamily).split(",").forEach(e=>{d.add(e.trim().replace(/["']/g,""))});Array.from(c.children).forEach(e=>{e instanceof HTMLElement&&b(e)})}const d=new Set;b(a);return d}function ua(a,b){return t(function*(){const d=yield sa(a,b),c=ta(a);return(yield Promise.all(d.filter(e=>c.has(e.style.fontFamily.trim().replace(/["']/g,""))).map(e=>R(e.cssText,e.parentStyleSheet?e.parentStyleSheet.href:null,b)))).join("\n")})}
function va(a,b){return t(function*(){const d=b.j!=null?b.j:b.K?null:yield ua(a,b);if(d){const c=document.createElement("style");c.appendChild(document.createTextNode(d));a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)}})};function wa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b),e=yield P(a,b,!0);yield va(e,b);yield T(e,b);u(e,b);return yield D(e,d,c)})}
function xa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b);var e=yield wa(a,b);e=yield B(e);const f=document.createElement("canvas"),g=f.getContext("2d"),k=b.G||window.devicePixelRatio||1,m=b.h||d,q=b.g||c;f.width=m*k;f.height=q*k;!b.J&&(f.width>16384||f.height>16384)&&(f.width>16384&&f.height>16384?f.width>f.height?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=16384):f.width>16384?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=
16384));f.style.width=`${m}`;f.style.height=`${q}`;b.backgroundColor&&(g.fillStyle=b.backgroundColor,g.fillRect(0,0,f.width,f.height));g.drawImage(e,0,0,f.width,f.height);return f})}function ya(a,b={}){return t(function*(){return(yield xa(a,b)).toDataURL()})};const za=["gemini.google.com","corp.google.com","proxy.googlers.com"];function Y(){return document.body.querySelectorAll('[class*="animate"]').length>0}function Z(a){return t(function*(){try{return yield ya(a,{h:a.offsetWidth,g:a.offsetHeight})}catch(d){var b=a.offsetHeight;const c=document.createElement("canvas");c.width=a.offsetWidth;c.height=b;return c.toDataURL("image/png")}})}
function Aa(){return t(function*(){const a=document.body.offsetWidth,b=document.body.offsetHeight,d=document.body.cloneNode(!0);d.querySelectorAll('[class*="animate"]').forEach(c=>{c.classList.remove(...Array.from(c.classList).filter(e=>e.startsWith("animate")))});d.style.width=`${a}px`;d.style.height=`${b}px`;return d})}
function Ba(a){return t(function*(){let b=document.body;if(Y()){var d=yield Aa();b=d;document.body.appendChild(d)}d=yield Z(b);Y()&&document.body.removeChild(b);window.parent.postMessage({type:"SEND_SCREENSHOT",image:d,topOffset:document.documentElement.scrollTop},a.origin)})}function Ca(a){return t(function*(){const b={type:"SEND_SCREENSHOT_FOR_DATA_VISUALIZATION",image:yield Z(document.body),topOffset:0};window.parent.postMessage(b,a.origin)})}
window.addEventListener("message",a=>t(function*(){if(za.some(d=>a.origin.includes(d))){var b=a.data;b&&(b.type==="MAKE_SCREENSHOT"&&(yield Ba(a)),b.type==="MAKE_SCREENSHOT_FOR_DATA_VISUALIZATION"&&(yield Ca(a)))}}));
</script><script>(function() {
  // Ensure this script is executed only once
  if (window.firebaseAuthBridgeScriptLoaded) {
    return;
  }
  window.firebaseAuthBridgeScriptLoaded = true;

  let nextTokenPromiseId = 0;

  // Stores { resolve, reject } for ongoing token requests
  const pendingTokenPromises = {};

  // Listen for messages from the Host Application
  window.addEventListener('message', function(event) {

    const messageData = event.data;

  if (messageData && messageData.type === 'RESOLVE_NEW_FIREBASE_TOKEN') {
      const { success, token, error, promiseId } = messageData ?? {};
      if (pendingTokenPromises[promiseId]) {
        if (success) {
          pendingTokenPromises[promiseId].resolve(token);
        } else {
          pendingTokenPromises[promiseId].reject(new Error(error || 'Token refresh failed from host.'));
        }
        delete pendingTokenPromises[promiseId];
      }
    }
  });

  // Expose a function for the Generated App to request a new Firebase token
  window.requestNewFirebaseToken = function() {
    const currentPromiseId = nextTokenPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingTokenPromises[currentPromiseId] = { resolve, reject };
    });
    if (window.parent && window.parent !== window) {
      window.parent.postMessage({
        type: 'REQUEST_NEW_FIREBASE_TOKEN',
        promiseId: currentPromiseId
      }, '*');
    } else {
      pendingTokenPromises[currentPromiseId].reject(new Error('No parent window to request token from.'));
      delete pendingTokenPromises[currentPromiseId];
    }
    return promise;
  };
})();</script><script>
let realOriginalGetUserMedia = null;
if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
  realOriginalGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);
}

(function() {
  if (navigator.mediaDevices && navigator.mediaDevices.__proto__) {
    try {
      Object.defineProperty(navigator.mediaDevices.__proto__, 'getUserMedia', {
        get: function() {
          return undefined; // Or throw an error
        },
        configurable: false
      });
    } catch (error) {
      console.error("Error defining prototype getter:", error);
    }
  }
})();

(function() {
  const pendingMediaResolvers = {};
  let nextMediaPromiseId = 0;

  function requestMediaPermissions(constraints) {
    const mediaPromiseId = nextMediaPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingMediaResolvers[mediaPromiseId] = (granted) => {
        delete pendingMediaResolvers[mediaPromiseId];
        resolve(granted);
      };
    });

    window.parent.postMessage({
      type: 'requestMediaPermission',
      constraints: constraints,
      promiseId: mediaPromiseId,
    }, '*');

    return promise;
  }

  let originalGetUserMedia = realOriginalGetUserMedia;

  function interceptGetUserMedia() {
    if (navigator.mediaDevices) {
      Object.defineProperty(navigator.mediaDevices, 'getUserMedia', {
        value: function(constraints) {
          return requestMediaPermissions(constraints).then((granted) => {
            if (granted) {
              if (originalGetUserMedia) {
                return originalGetUserMedia(constraints);
              } else {
                throw new Error("Original getUserMedia not available.");
              }
            } else {
              throw new DOMException('Permission denied', 'NotAllowedError');
            }
          });
        },
        writable: false,
        configurable: false
      });
    }
  }

  interceptGetUserMedia();

  const observer = new MutationObserver(function(mutationsList, observer) {
    for (const mutation of mutationsList) {
      if (mutation.type === 'reconfigured' && mutation.name === 'getUserMedia' && mutation.object === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'attributes' && mutation.attributeName === 'getUserMedia' && mutation.target === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'childList' && mutation.addedNodes) {
        mutation.addedNodes.forEach(node => {
          if (node === navigator.mediaDevices) {
            interceptGetUserMedia();
          }
        });
      }
    }
  });

  function interceptSpeechRecognition() {
    if (!window.SpeechRecognition && !window.webkitSpeechRecognition) {
      return;
    }

    const OriginalSpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    const SpeechRecognitionWrapper = function(...args) {
      const recognizer = new OriginalSpeechRecognition(...args);
      const originalStart = recognizer.start.bind(recognizer);

      recognizer.start = function() {
        requestMediaPermissions({ audio: true }).then(granted => {
          if (granted) {
            originalStart();
          } else {
            const errorEvent = new SpeechRecognitionErrorEvent('error');
            errorEvent.error = 'not-allowed'; // This is the standard error for permission denial.
            recognizer.dispatchEvent(errorEvent);
          }
        });
      };

      return recognizer;
    };

    SpeechRecognitionWrapper.prototype = OriginalSpeechRecognition.prototype;
    SpeechRecognitionWrapper.prototype.constructor = SpeechRecognitionWrapper;

    if (window.SpeechRecognition) {
      window.SpeechRecognition = SpeechRecognitionWrapper;
    }
    if (window.webkitSpeechRecognition) {
      window.webkitSpeechRecognition = SpeechRecognitionWrapper;
    }
  }

  interceptSpeechRecognition();

  window.addEventListener('message', function(event) {
    if (event.data) {
      if (event.data.type === 'resolveMediaPermission') {
        const { promiseId, granted } = event.data;
        if (pendingMediaResolvers[promiseId]) {
          pendingMediaResolvers[promiseId](granted);
        }
      }
    }
  });

})();</script><script>((function(modelInformation) {
  const originalFetch = window.fetch;
  // TODO: b/421908508 - Move these out of the script and match all generative AI model calls.
  let googleLlmBaseApiUrls = [
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':streamGenerateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageEditModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.ttsModelName + ':generateContent',
  ];
  modelInformation.deprecatedTextModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':streamGenerateContent',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':generateContent',
    );
  });

  const pendingFetchResolvers = {};
  let nextPromiseId = 0;

  function handleStringInput(input, optionsArgument) {
    const actualUrl = input;
    const fetchCallArgs = [actualUrl, optionsArgument];
    const effectiveOptions = optionsArgument || {};
    const bodyForApiKeyCheck = effectiveOptions.body;
    const bodyForPostMessage = effectiveOptions.body;
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  function handleRequestInput(input, optionsArgument) {
    const actualUrl = input.url;
    const fetchCallArgs = [input, optionsArgument];
    const effectiveOptions = { method: input.method, headers: new Headers(input.headers) };
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (optionsArgument) {
      if (optionsArgument.method) effectiveOptions.method = optionsArgument.method;
      if (optionsArgument.headers) effectiveOptions.headers = new Headers(optionsArgument.headers);
      if ('body' in optionsArgument) {
        bodyForApiKeyCheck = optionsArgument.body;
        bodyForPostMessage = optionsArgument.body;
      } else {
        bodyForApiKeyCheck = undefined;
        bodyForPostMessage = input.body;
      }
    } else {
      bodyForApiKeyCheck = undefined;
      bodyForPostMessage = input.body;
    }
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  window.fetch = function(input, optionsArgument) {
    let actualUrl;
    let fetchCallArgs;
    let effectiveOptions = {};
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (typeof input === 'string') {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleStringInput(input, optionsArgument));
    } else if (input instanceof Request) {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleRequestInput(input, optionsArgument));
    } else {
      return originalFetch.apply(window, [input, optionsArgument]);
    }

    effectiveOptions.method = effectiveOptions.method || 'GET';
    if (!effectiveOptions.headers) {
      effectiveOptions.headers = new Headers();
    }


    if (typeof actualUrl === 'string' && googleLlmBaseApiUrls.some((url) => actualUrl.startsWith(url))) {
      let apiKeyIsNull = true;

      const regex = new RegExp("models/([^:]+)");
      const modelNameMatch = actualUrl.match(regex);
      const modelName = modelNameMatch ? modelNameMatch[1] : 'unspecified';


      try {
        const urlObject = new URL(actualUrl);  // Use URL object for robust parsing
        const apiKeyParam = urlObject.searchParams.get('key');
        if (apiKeyParam) {
          apiKeyIsNull = false;
        }
      } catch (e) {
        // Continue checks even if URL parsing fails
      }

      if (apiKeyIsNull && effectiveOptions.headers) {
        const h = new Headers(effectiveOptions.headers);
        const apiKeyHeaderValue = h.get('X-API-Key') || h.get('x-api-key');
        if (apiKeyHeaderValue) {
          apiKeyIsNull = false;
          return originalFetch.apply(window, fetchCallArgs);
        }
      }

      if (apiKeyIsNull && effectiveOptions.method && ['POST', 'PUT', 'PATCH'].includes(effectiveOptions.method.toUpperCase()) && typeof bodyForApiKeyCheck === 'string') {
        try {
          const bodyData = JSON.parse(bodyForApiKeyCheck);
          if (bodyData && bodyData.apiKey) {
            apiKeyIsNull = false;
            return originalFetch.apply(window, fetchCallArgs);
          }
        } catch (e) {
          // Ignore JSON parsing errors
        }
      }

      if(apiKeyIsNull) {
        const promiseId = nextPromiseId++;
        const promise = new Promise((resolve) => {
          pendingFetchResolvers[promiseId] = (resolvedResponse) => {
            delete pendingFetchResolvers[promiseId];
            resolve(resolvedResponse);
          };
        });

        let serializedBodyForPostMessage;
        if (typeof bodyForPostMessage === 'string' || bodyForPostMessage == null) {
            serializedBodyForPostMessage = bodyForPostMessage;
        } else if (bodyForPostMessage instanceof ReadableStream) {
            serializedBodyForPostMessage = null;
        } else {
            try {
                serializedBodyForPostMessage = JSON.stringify(bodyForPostMessage);
            } catch (e) {
                serializedBodyForPostMessage = null;
            }
        }

        const messageOptions = {
            method: effectiveOptions.method,
            headers: Object.fromEntries(new Headers(effectiveOptions.headers).entries()),
            body: serializedBodyForPostMessage
        };

        window.parent.postMessage({
          type: 'requestFetch',
          url: actualUrl,
          modelName: modelName,
          options: messageOptions,
          promiseId: promiseId,
        }, '*');

        return promise;
      }
      return originalFetch.apply(window, fetchCallArgs);
    }
    return originalFetch.apply(window, fetchCallArgs);
  };

  window.addEventListener('message', function(event) {
    if (event.data && event.data.type === 'resolveFetch') {
      const { promiseId, response } = event.data;
      if (pendingFetchResolvers[promiseId]) {
        try {
          const reconstructedResponse = new Response(response.body, {
            status: response.status,
            statusText: response.statusText,
            headers: new Headers(response.headers),
          });
          pendingFetchResolvers[promiseId](reconstructedResponse);
        } catch (error) {
          pendingFetchResolvers[promiseId](new Response(null, { status: 500, statusText: "Interceptor Response Reconstruction Error" }));
        }
      }
    }
  });

}))({"textModelName":"gemini-2.5-flash-preview-05-20","imageModelName":"imagen-3.0-generate-002","imageEditModelName":"gemini-2.5-flash-image-preview","videoModelName":"veo-2.0-generate-001","ttsModelName":"gemini-2.5-flash-preview-tts","deprecatedTextModelNames":["gemini-2.0-flash","gemini-2.5-flash-preview-04-17"]})</script><script>(function() {
  const originalConsoleLog = console.log;
  const originalConsoleError = console.error;

    /**
   * Normalizes an error event or a promise rejection reason into a structured error object.
   * @param {*} errorEventOrReason The error object or reason.
   * @return {object} Structured error data { message, name, stack }.
   */
  function getErrorObject(errorEventOrReason) {
    if (errorEventOrReason instanceof Error) {
      return {
        message: errorEventOrReason.message,
        name: errorEventOrReason.name,
        stack: errorEventOrReason.stack,
      };
    }
    // Fallback for non-Error objects.
    try {
      return {
        message: JSON.stringify(errorEventOrReason),
        name: 'UnknownErrorType',
        stack: null,
      };
    } catch (e) {
      return {
        message: String(errorEventOrReason),
        name: 'UnknownErrorTypeNonStringifiable',
        stack: null,
      };
    }
  }

  /**
   * Converts an array of arguments (from log/error) into a single string.
   * Handles Error objects specially to include their message and stack.
   * @param {Array<*>} args - Arguments passed to console methods.
   * @return {string} A string representation of the arguments.
   */
  function stringifyArgs(args) {
    return args
      .map((arg) => {
        if (arg instanceof Error) {
          const {message, stack} = arg;
          return `Error: ${message}${stack ? ('\nStack: ' + stack) : ''}`;
        }
        if (typeof arg === 'object' && arg !== null) {
          try {
            return JSON.stringify(arg);
          } catch (error) {
            return '[Circular Object]';
          }
        } else {
          return String(arg);
        }
      })
      .join(' ');
  }

  console.log = function(...args) {
    const logString = stringifyArgs(args);
    window.parent.postMessage({ type: 'log', message: logString }, '*');
    originalConsoleLog.apply(console, args);
  };

  console.error = function(...args) {
    let errorData;
    if (args.length > 0 && args[0] instanceof Error) {
      const err = args[0];
      // If the first arg is an Error, capture its details.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        ...getErrorObject(err),
        rawArgsString: stringifyArgs(args.slice(1)),
        timestamp: new Date().toISOString(),
      };
    } else {
      // If not an Error object, treat all args as a general error message.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        message: stringifyArgs(args),
        name: 'ConsoleLoggedError',
        stack: null,
        timestamp: new Date().toISOString(),
      };
    }
    window.parent.postMessage(errorData, '*');
    originalConsoleError.apply(console, args);
  };

  // Listen for global unhandled synchronous errors.
  window.addEventListener('error', function(event) {
    const errorDetails = event.error ? getErrorObject(event.error) : {
      message: event.message,
      name: 'GlobalError',
      stack: null,
      filename: event.filename,
      lineno: event.lineno,
      colno: event.colno,
    };

    window.parent.postMessage({
      type: 'error',
      source: 'global',
      ...errorDetails,
      message: errorDetails.message || event.message,
      timestamp: new Date().toISOString(),
    }, '*');
  });

  // Listen for unhandled promise rejections (asynchronous errors).
  window.addEventListener('unhandledrejection', function(event) {
    const errorDetails = getErrorObject(event.reason);

    window.parent.postMessage({
      type: 'error',
      source: 'unhandledrejection',
      ...errorDetails,
      message: errorDetails.message || 'Unhandled Promise Rejection',
      timestamp: new Date().toISOString(),
    }, '*');
  });

})();</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telugu Learning Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&amp;family=Noto+Sans+Telugu:wght@400;700&amp;display=swap" rel="stylesheet">
    <style>
        :root {
            --hue: 230;
            --primary-color: hsl(var(--hue), 90%, 60%);
            --bg-color: hsl(var(--hue), 30%, 98%);
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: hsl(var(--hue), 20%, 20%);
        }
        .telugu-char { font-family: 'Noto Sans Telugu', sans-serif; }
        .status-indicator { border-left-width: 5px; transition: border-color 0.3s ease; }
        .status-none { border-color: transparent; }
        .status-not-sure { border-color: #ef4444; }
        .status-getting-there { border-color: #f59e0b; }
        .status-confident { border-color: #22c55e; }
        .tab-btn.active { color: var(--primary-color); border-color: var(--primary-color); }
        .sub-tab-btn { transition: all 0.2s ease-in-out; }
        .sub-tab-btn.active { background-color: var(--primary-color); color: white; box-shadow: 0 4px 14px 0 hsl(var(--hue), 50%, 60%, 0.3); }
        .view { display: none; }
        .view.active { display: block; animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .achievement.unlocked { opacity: 1; transform: scale(1); }
        .achievement { opacity: 0.4; transform: scale(0.95); transition: all 0.3s ease; }
        #onboarding-overlay, #letter-modal { transition: opacity 0.3s ease-in-out; }
        #onboarding-modal, #letter-modal-content { transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out; }
        #app-loader { display: flex; flex-direction:column; align-items: center; justify-content: center; position: fixed; inset: 0; background-color: var(--bg-color); z-index: 100; transition: opacity 0.5s ease; padding: 1rem; }
        .spinner { border: 4px solid rgba(0, 0, 0, 0.1); width: 24px; height: 24px; border-radius: 50%; border-left-color: var(--primary-color); animation: spin 1s ease infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.fixed{position:fixed}.sticky{position:sticky}.inset-0{inset:0px}.top-4{top:1rem}.z-40{z-index:40}.z-50{z-index:50}.mx-auto{margin-left:auto;margin-right:auto}.my-6{margin-top:1.5rem;margin-bottom:1.5rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mt-12{margin-top:3rem}.mt-2{margin-top:0.5rem}.mt-4{margin-top:1rem}.mb-1{margin-bottom:0.25rem}.mt-1{margin-top:0.25rem}.flex{display:flex}.grid{display:grid}.hidden{display:none}.aspect-square{aspect-ratio:1 / 1}.\!h-10{height:2.5rem !important}.h-4{height:1rem}.h-48{height:12rem}.h-6{height:1.5rem}.h-8{height:2rem}.\!w-10{width:2.5rem !important}.w-full{width:100%}.w-1\/3{width:33.333333%}.w-6{width:1.5rem}.w-8{width:2rem}.max-w-5xl{max-width:64rem}.max-w-md{max-width:28rem}.-translate-y-4{--tw-translate-y:-1rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-95{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer{cursor:pointer}.grid-cols-1{grid-template-columns:repeat(1, minmax(0, 1fr))}.grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}.grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.flex-col{flex-direction:column}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.rounded-2xl{border-radius:1rem}.rounded-lg{border-radius:0.5rem}.rounded-xl{border-radius:0.75rem}.rounded-full{border-radius:9999px}.rounded-md{border-radius:0.375rem}.border-b-4{border-bottom-width:4px}.border-transparent{border-color:transparent}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity:1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\/70{background-color:rgb(255 255 255 / 0.7)}.bg-amber-500{--tw-bg-opacity:1;background-color:rgb(245 158 11 / var(--tw-bg-opacity, 1))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity:1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity:1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-opacity-60{--tw-bg-opacity:0.6}.bg-opacity-70{--tw-bg-opacity:0.7}.bg-gradient-to-r{background-image:linear-gradient(to right, var(--tw-gradient-stops))}.from-indigo-600{--tw-gradient-from:#4f46e5 var(--tw-gradient-from-position);--tw-gradient-to:rgb(79 70 229 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.to-purple-600{--tw-gradient-to:#9333ea var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.p-2{padding:0.5rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.p-1{padding:0.25rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.text-left{text-align:left}.text-center{text-align:center}.text-2xl{font-size:1.5rem;line-height:2rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xs{font-size:0.75rem;line-height:1rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-6xl{font-size:3.75rem;line-height:1}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-5xl{font-size:3rem;line-height:1}.font-black{font-weight:900}.font-bold{font-weight:700}.font-semibold{font-weight:600}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-transparent{color:transparent}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.opacity-0{opacity:0}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.backdrop-blur-lg{--tw-backdrop-blur:blur(16px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-300{transition-duration:300ms}.hover\:-translate-y-1:hover{--tw-translate-y:-0.25rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:bg-blue-700:hover{--tw-bg-opacity:1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-300:hover{--tw-bg-opacity:1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.hover\:text-blue-600:hover{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.hover\:text-gray-700:hover{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.hover\:shadow-lg:hover{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-50:disabled{opacity:0.5}@media (min-width: 640px){.sm\:grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.sm\:grid-cols-6{grid-template-columns:repeat(6, minmax(0, 1fr))}}@media (min-width: 768px){.md\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.md\:grid-cols-8{grid-template-columns:repeat(8, minmax(0, 1fr))}.md\:p-8{padding:2rem}.md\:text-5xl{font-size:3rem;line-height:1}.md\:text-4xl{font-size:2.25rem;line-height:2.5rem}}</style></head>
<body class="antialiased">

    <div id="app-loader" style="opacity: 0; display: none;">
        <div class="spinner !w-10 !h-10"></div>
        <p class="mt-4 text-gray-600">Loading your learning journey...</p>
    </div>

    <div id="app" class="container mx-auto p-4 max-w-5xl opacity-0" style="transition: opacity 0.5s; opacity: 1;">
        <header class="text-center my-6">
            <h1 class="text-4xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600">Telugu Learning Hub</h1>
            <p class="text-lg text-gray-600 mt-2">The complete journey to mastering the Telugu script.</p>
        </header>

        <nav id="main-nav" class="bg-white/70 backdrop-blur-lg p-2 rounded-xl shadow-md mb-8 sticky top-4 z-40 flex items-center justify-center gap-2" aria-label="Main navigation">
            <button data-view="progress" class="tab-btn text-lg font-bold py-3 px-5 border-b-4 transition-colors duration-300" aria-label="View Progress dashboard"> Progress</button>
            <button data-view="learn" class="tab-btn text-lg font-bold py-3 px-5 border-b-4 border-transparent transition-colors duration-300 active" aria-label="View Learn section"> Learn</button>
            <button data-view="practice" class="tab-btn text-lg font-bold py-3 px-5 border-b-4 border-transparent transition-colors duration-300" aria-label="View Practice section"> Practice</button>
        </nav>

        <main>
            <div id="progress-view" class="view">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-xl shadow-md">
                        <h3 class="font-bold text-xl mb-4">Learning Progress</h3>
                        <div class="mb-4">
                        <div class="flex justify-between items-end mb-1"><p class="font-semibold">Alphabet</p><p class="text-sm font-bold text-blue-600">0% Mastered</p></div>
                        <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden flex">
                            <div class="bg-green-500 h-4" style="width: 0%"></div>
                            <div class="bg-amber-500 h-4" style="width: 0%"></div>
                            <div class="bg-red-500 h-4" style="width: 0%"></div>
                        </div></div>
                        <div class="mb-4">
                        <div class="flex justify-between items-end mb-1"><p class="font-semibold">Gunintalu</p><p class="text-sm font-bold text-blue-600">0% Mastered</p></div>
                        <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden flex">
                            <div class="bg-green-500 h-4" style="width: 0%"></div>
                            <div class="bg-amber-500 h-4" style="width: 0%"></div>
                            <div class="bg-red-500 h-4" style="width: 0%"></div>
                        </div></div>
                        <div class="mb-4">
                        <div class="flex justify-between items-end mb-1"><p class="font-semibold">Vottulu</p><p class="text-sm font-bold text-blue-600">0% Mastered</p></div>
                        <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden flex">
                            <div class="bg-green-500 h-4" style="width: 0%"></div>
                            <div class="bg-amber-500 h-4" style="width: 0%"></div>
                            <div class="bg-red-500 h-4" style="width: 0%"></div>
                        </div></div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-md">
                        <h3 class="font-bold text-xl mb-4">Achievements</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                            
                                <div class="achievement  text-center p-2">
                                    <div class="text-4xl"></div>
                                    <p class="font-semibold text-sm mt-1">Vowel Virtuoso</p>
                                    <p class="text-xs text-gray-500">Master all vowels</p>
                                </div>
                                <div class="achievement  text-center p-2">
                                    <div class="text-4xl"></div>
                                    <p class="font-semibold text-sm mt-1">Consonant Champ</p>
                                    <p class="text-xs text-gray-500">Master all consonants</p>
                                </div>
                        </div>
                    </div>
                </div></div>
            <div id="learn-view" class="view active">
                    <div id="learn-sub-nav" class="flex justify-center mb-6 bg-gray-200 rounded-lg p-1">
                        <button data-learn-view="alphabet" class="sub-tab-btn font-semibold py-2 px-4 rounded-md w-1/3 active">Alphabet</button>
                        <button data-learn-view="gunintalu" class="sub-tab-btn font-semibold py-2 px-4 rounded-md w-1/3 ">Gunintalu</button>
                        <button data-learn-view="vottulu" class="sub-tab-btn font-semibold py-2 px-4 rounded-md w-1/3 ">Vottulu</button>
                    </div>
                    <div id="learn-grid" class="grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-3"><div data-item-key="vowel_a" class="item-card status-indicator status-none bg-white rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer p-2 flex flex-col items-center justify-center aspect-square">
                            <span class="text-3xl md:text-4xl telugu-char"></span>
                            <span class="text-xs text-gray-500">a</span></div><div data-item-key="vowel_" class="item-card status-indicator status-none bg-white rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer p-2 flex flex-col items-center justify-center aspect-square">
                            <span class="text-3xl md:text-4xl telugu-char"></span>
                            <span class="text-xs text-gray-500"></span></div><div data-item-key="vowel_i" class="item-card status-indicator status-none bg-white rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer p-2 flex flex-col items-center justify-center aspect-square">
                            <span class="text-3xl md:text-4xl telugu-char"></span>
                            <span class="text-xs text-gray-500">i</span></div><div data-item-key="vowel_" class="item-card status-indicator status-none bg-white rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer p-2 flex flex-col items-center justify-center aspect-square">
                            <span class="text-3xl md:text-4xl telugu-char"></span>
                            <span class="text-xs text-gray-500"></span></div><div data-item-key="vowel_u" class="item-card status-indicator status-none bg-white rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer p-2 flex flex-col items-center justify-center aspect-square">
                            <span class="text-3xl md:text-4xl telugu-char"></span>
                            <span class="text-xs text-gray-500">u</span></div><div data-item-key="consonant_ka" class="item-card status-indicator status-none bg-white rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer p-2 flex flex-col items-center justify-center aspect-square">
                            <span class="text-3xl md:text-4xl telugu-char"></span>
                            <span class="text-xs text-gray-500">ka</span></div><div data-item-key="consonant_kha" class="item-card status-indicator status-none bg-white rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer p-2 flex flex-col items-center justify-center aspect-square">
                            <span class="text-3xl md:text-4xl telugu-char"></span>
                            <span class="text-xs text-gray-500">kha</span></div><div data-item-key="consonant_ga" class="item-card status-indicator status-none bg-white rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer p-2 flex flex-col items-center justify-center aspect-square">
                            <span class="text-3xl md:text-4xl telugu-char"></span>
                            <span class="text-xs text-gray-500">ga</span></div><div data-item-key="consonant_gha" class="item-card status-indicator status-none bg-white rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer p-2 flex flex-col items-center justify-center aspect-square">
                            <span class="text-3xl md:text-4xl telugu-char"></span>
                            <span class="text-xs text-gray-500">gha</span></div><div data-item-key="consonant_ca" class="item-card status-indicator status-none bg-white rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer p-2 flex flex-col items-center justify-center aspect-square">
                            <span class="text-3xl md:text-4xl telugu-char"></span>
                            <span class="text-xs text-gray-500">ca</span></div><div data-item-key="consonant_ja" class="item-card status-indicator status-none bg-white rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer p-2 flex flex-col items-center justify-center aspect-square">
                            <span class="text-3xl md:text-4xl telugu-char"></span>
                            <span class="text-xs text-gray-500">ja</span></div></div></div>
            <div id="practice-view" class="view"><div class="bg-white p-6 rounded-xl shadow-md text-center"><h3 class="font-bold text-xl mb-4">Practice Zone</h3><p class="text-gray-600">The interactive quiz and writing pad are coming soon!</p><div class="mt-4 p-8 bg-gray-100 rounded-lg"><span class="text-6xl telugu-char"></span><p class="mt-2 font-semibold">Get ready to test your skills!</p></div></div></div>
        </main>
        
        <footer class="text-center mt-12">
            <div id="user-status" class="text-xs text-gray-500 mb-4">User ID: vlnOlpa2...</div>
            <button id="download-btn" class="bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors text-sm">Download App File</button>
        </footer>
    </div>
    
    <!-- Modals -->
    <div id="letter-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 opacity-0 hidden">
        <div id="letter-modal-content" class="bg-white rounded-2xl shadow-2xl p-6 md:p-8 w-full max-w-md mx-auto transform opacity-0 -translate-y-4">
                    <div class="flex justify-between items-start">
                        <div class="flex items-center gap-4">
                             <h3 class="text-5xl telugu-char font-bold"></h3>
                             <button id="audio-btn" class="text-gray-500 hover:text-blue-600 transition-colors w-8 h-8 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed" title="Telugu audio voice not available on this device." disabled="">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.969 9.969 0 0117 10a9.969 9.969 0 01-.929 7.071 1 1 0 01-1.414-1.414A7.97 7.97 0 0015 10a7.97 7.97 0 00-.929-5.657 1 1 0 010-1.414zm-2.828 2.828a1 1 0 011.414 0A5.98 5.98 0 0114 10a5.98 5.98 0 01-.757 3.243 1 1 0 01-1.414-1.414A3.982 3.982 0 0012 10a3.982 3.982 0 00-.757-2.172 1 1 0 010-1.414z"></path></svg>
                             </button>
                        </div>
                        <button id="close-modal-btn" class="text-gray-400 hover:text-gray-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
                    </div>
                     <p class="text-xl text-gray-600 font-semibold mt-1">a</p>
                    <div class="my-6 text-center"><p class="text-gray-800"><strong>Example:</strong> Amma (Mother)</p><p class="text-gray-600"></p></div>
                    <div class="mb-6 h-48 w-full bg-gray-100 rounded-lg flex items-center justify-center" id="writing-animation-container"><svg viewBox="0 0 100 100" style="max-height: 12rem;"><defs><clipPath id="clip-1758925509254"><rect x="0" y="0" width="100" height="100"></rect></clipPath></defs><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" class="telugu-char" font-size="80px" fill="var(--primary-color)" clip-path="url(#clip-1758925509254)"></text></svg></div>
                    <div class="grid grid-cols-3 gap-2 text-center">
                        <button data-status="not-sure" class="confidence-btn p-2 rounded-lg bg-gray-100">Not Sure</button>
                        <button data-status="getting-there" class="confidence-btn p-2 rounded-lg bg-gray-100">Getting There</button>
                        <button data-status="confident" class="confidence-btn p-2 rounded-lg bg-gray-100">Confident</button>
                    </div></div>
    </div>
    
    <div id="onboarding-overlay" class="fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4 opacity-0 hidden">
        <div id="onboarding-modal" class="bg-white rounded-lg p-8 max-w-md w-full text-center shadow-xl transform opacity-0 scale-95">
            <h2 class="text-2xl font-bold mb-4">Welcome to the Telugu Learning Hub!</h2>
            <p class="text-gray-600 mb-6">Here's a quick tour to get you started.</p>
            <div class="text-left space-y-4 mb-8">
                <p><strong> Progress:</strong> Your dashboard to track mastery and streaks.</p>
                <p><strong> Learn:</strong> Explore all letters and symbols at your own pace.</p>
                <p><strong> Practice:</strong> Test your knowledge with quizzes and writing practice.</p>
            </div>
            <button id="close-onboarding" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg w-full hover:bg-blue-700 transition-transform transform hover:scale-105">Let's Go!</button>
        </div>
    </div>

    <!-- ===== SCRIPT LIBRARIES ===== -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <!-- ===== APPLICATION LOGIC ===== -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, onSnapshot, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // =================================================================================
        // I. APP BOOTSTRAP AND DATA
        // =================================================================================
        const AppData = {
            alphabet: [
                { telugu: '', transliteration: 'a', type: 'vowel', example_english: 'Amma (Mother)' },
                { telugu: '', transliteration: '', type: 'vowel', example_english: 'vu (Cow)' },
                { telugu: '', transliteration: 'i', type: 'vowel', example_english: 'Illu (House)' },
                { telugu: '', transliteration: '', type: 'vowel', example_english: 'ga (Fly)' },
                { telugu: '', transliteration: 'u', type: 'vowel', example_english: 'Uuta (Squirrel)' },
                { telugu: '', transliteration: 'ka', type: 'consonant', example_english: 'Kalam (Pen)' },
                { telugu: '', transliteration: 'kha', type: 'consonant', example_english: 'Khaga (Sword)' },
                { telugu: '', transliteration: 'ga', type: 'consonant', example_english: 'Gampa (Basket)' },
                { telugu: '', transliteration: 'gha', type: 'consonant', example_english: 'Ghaa (Pot)' },
                { telugu: '', transliteration: 'ca', type: 'consonant', example_english: 'Cakra (Wheel)' },
                { telugu: '', transliteration: 'ja', type: 'consonant', example_english: 'Jaa (Braid)' },
            ],
            gunintalu: [
                { telugu: ' +  = ', transliteration: 'k', example_english: 'Tala-kattu-drgha', description: 'Adds an "" sound.', type: 'gunintalu' },
                { telugu: ' +  = ', transliteration: 'ki', example_english: 'Gudi', description: 'Adds a short "i" sound.', type: 'gunintalu' },
            ],
            vottulu: [
                { telugu: '', transliteration: 'kya', example_english: 'Ya-vattu', description: 'Adds a "ya" sound.', type: 'vottulu' },
                { telugu: '', transliteration: 'kra', example_english: 'Ra-vattu', description: 'Adds a "ra" sound.', type: 'vottulu' },
            ],
            achievements: {
                vowelVirtuoso: { title: "Vowel Virtuoso", desc: "Master all vowels", icon: "", unlocked: false, type: 'alphabet'},
                consonantChamp: { title: "Consonant Champ", desc: "Master all consonants", icon: "", unlocked: false, type: 'alphabet' },
            }
        };

        let appState = null;
        let firebaseService, ui, audio;
        let firebaseConfig; 

        async function main() {
            try {
                // Audio initialization is now async to wait for voices to load.
                audio = await AudioController.init();
                firebaseService = await FirebaseService.init();
                
                firebaseService.onUserStateChange(state => {
                    appState = state;
                    ui = UIController.init(appState, audio, firebaseService);
                    
                    ProgressModule.render(appState);
                    LearnModule.render(appState);
                    PracticeModule.render(appState);
                    
                    ui.navigateTo('progress'); 
                    Onboarding.init(appState, firebaseService);

                    document.getElementById('app-loader').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('app-loader').style.display = 'none';
                        document.getElementById('app').style.opacity = '1';
                    }, 500);
                });

            } catch (error) {
                console.error("Initialization failed:", error);
                let errorMessage = `<p class="text-red-500">Error: ${error.message}</p>`;
                 if (error.message && error.message.includes('api-key-not-valid')) {
                    errorMessage = `<div class="text-center p-4 bg-red-50 border border-red-200 rounded-lg"><h3 class="font-bold text-lg text-red-700">Configuration Error</h3><p class="text-red-600 mt-2">Your Firebase API key is missing or invalid.</p><p class="text-gray-700 mt-2">Please paste your unique <code class="bg-gray-200 text-sm p-1 rounded">firebaseConfig</code> object into this file.</p></div>`;
                }
                document.getElementById('app-loader').innerHTML = errorMessage;
            }
        }
        
        // =================================================================================
        // II. FIREBASE SERVICE & STATE
        // =================================================================================
        const FirebaseService = (() => {
            let auth, db, userId, userDocRef;
            let onStateChangeCallback = null;
            
            async function init() {
                firebaseConfig = {
                  apiKey: "AIzaSyCPGHcWevP9edJzROksfXNEMDWOAhxwKPA",
                  authDomain: "learn-telegu.firebaseapp.com",
                  projectId: "learn-telegu",
                  storageBucket: "learn-telegu.firebasestorage.app",
                  messagingSenderId: "1081028550840",
                  appId: "1:1081028550840:web:772516df0ab0d48652544d",
                  measurementId: "G-6XYDD9FEER"
                };
                
                const app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);

                return new Promise((resolve, reject) => {
                    signInAnonymously(auth).then(() => {
                         onAuthStateChanged(auth, async user => {
                            if (user) {
                                userId = user.uid;
                                const appId = "telugu-learning-hub";
                                userDocRef = doc(db, `artifacts/${appId}/users/${userId}`);
                                document.getElementById('user-status').textContent = `User ID: ${userId.substring(0,8)}...`;
                                
                                const docSnap = await getDoc(userDocRef);
                                if (!docSnap.exists()) {
                                    await setDoc(userDocRef, getNewUserState());
                                }

                                onSnapshot(userDocRef, (doc) => {
                                    if (onStateChangeCallback) onStateChangeCallback(doc.data());
                                });
                                
                                resolve(this);
                            }
                        });
                    }).catch(reject);
                });
            }

            function getNewUserState() { return { letterStates: {}, achievements: AppData.achievements, onboardingComplete: false }; }
            async function updateState(updates) {
                if (!userDocRef) return;
                try { await setDoc(userDocRef, updates, { merge: true }); } 
                catch (error) { console.error("Error updating user state:", error); }
            }

            return {
                init,
                onUserStateChange: (callback) => { onStateChangeCallback = callback; },
                setConfidence: (key, status) => updateState({ [`letterStates.${key}`]: status }),
                completeOnboarding: () => updateState({ onboardingComplete: true }),
            };
        })();

        // =================================================================================
        // III. GLOBAL UI CONTROLLER
        // =================================================================================
        const UIController = (() => {
            let state, audio, firebase;
            const views = document.querySelectorAll('.view');
            const nav = document.getElementById('main-nav');
            const letterModal = document.getElementById('letter-modal');
            const letterModalContent = document.getElementById('letter-modal-content');

            function init(appState, audioController, firebaseService) {
                state = appState;
                audio = audioController;
                firebase = firebaseService;
                nav.addEventListener('click', handleNav);
                letterModal.addEventListener('click', (e) => { if (e.target === letterModal) hideLetterModal(); });
                document.getElementById('download-btn').addEventListener('click', () => {
                    const blob = new Blob([document.documentElement.outerHTML], { type: 'text/html' });
                    const a = document.createElement('a');
                    a.href = URL.createObjectURL(blob);
                    a.download = 'telugu-learning-hub.html';
                    a.click();
                });
                return this;
            }

            function handleNav(e) { if (e.target.matches('[data-view]')) navigateTo(e.target.dataset.view); }
            
            function navigateTo(viewId) {
                views.forEach(v => v.classList.remove('active'));
                document.getElementById(`${viewId}-view`).classList.add('active');
                nav.querySelectorAll('.tab-btn').forEach(btn => btn.classList.toggle('active', btn.dataset.view === viewId));
                if (viewId === 'learn') LearnModule.render(state);
                else if (viewId === 'progress') ProgressModule.render(state);
            }

            function showLetterModal(item, itemKey) {
                const currentStatus = state.letterStates[itemKey] || 'none';
                const charToSpeak = item.type === 'gunintalu' ? item.telugu.split('=')[1].trim() : item.telugu;
                
                letterModalContent.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div class="flex items-center gap-4">
                             <h3 class="text-5xl telugu-char font-bold">${item.telugu}</h3>
                             <button id="audio-btn" class="text-gray-500 hover:text-blue-600 transition-colors w-8 h-8 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed" title="${audio.isReady ? 'Listen' : 'Telugu audio voice not available on this device.'}">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.969 9.969 0 0117 10a9.969 9.969 0 01-.929 7.071 1 1 0 01-1.414-1.414A7.97 7.97 0 0015 10a7.97 7.97 0 00-.929-5.657 1 1 0 010-1.414zm-2.828 2.828a1 1 0 011.414 0A5.98 5.98 0 0114 10a5.98 5.98 0 01-.757 3.243 1 1 0 01-1.414-1.414A3.982 3.982 0 0012 10a3.982 3.982 0 00-.757-2.172 1 1 0 010-1.414z" /></svg>
                             </button>
                        </div>
                        <button id="close-modal-btn" class="text-gray-400 hover:text-gray-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg></button>
                    </div>
                     <p class="text-xl text-gray-600 font-semibold mt-1">${item.transliteration}</p>
                    <div class="my-6 text-center"><p class="text-gray-800"><strong>Example:</strong> ${item.example_english}</p><p class="text-gray-600">${item.description || ''}</p></div>
                    <div class="mb-6 h-48 w-full bg-gray-100 rounded-lg flex items-center justify-center" id="writing-animation-container"></div>
                    <div class="grid grid-cols-3 gap-2 text-center">
                        <button data-status="not-sure" class="confidence-btn p-2 rounded-lg ${currentStatus === 'not-sure' ? 'ring-2 ring-red-500 bg-red-100' : 'bg-gray-100'}">Not Sure</button>
                        <button data-status="getting-there" class="confidence-btn p-2 rounded-lg ${currentStatus === 'getting-there' ? 'ring-2 ring-amber-500 bg-amber-100' : 'bg-gray-100'}">Getting There</button>
                        <button data-status="confident" class="confidence-btn p-2 rounded-lg ${currentStatus === 'confident' ? 'ring-2 ring-green-500 bg-green-100' : 'bg-gray-100'}">Confident</button>
                    </div>`;

                letterModal.classList.remove('hidden');
                setTimeout(() => { letterModal.classList.remove('opacity-0'); letterModalContent.classList.remove('opacity-0', '-translate-y-4'); }, 10);
                
                const charToAnimate = item.type === 'gunintalu' ? item.telugu.split('=')[1].trim() : item.telugu;
                animateWriting(charToAnimate);
                
                letterModalContent.querySelector('#close-modal-btn').onclick = hideLetterModal;
                const audioBtn = letterModalContent.querySelector('#audio-btn');
                
                if (audio.isReady) {
                    audioBtn.onclick = () => audio.speak(charToSpeak);
                } else {
                    audioBtn.disabled = true;
                }

                letterModalContent.querySelectorAll('.confidence-btn').forEach(btn => {
                    btn.onclick = () => { firebase.setConfidence(itemKey, btn.dataset.status); audio.vibrate(); hideLetterModal(); };
                });
            }

            function hideLetterModal() {
                letterModal.classList.add('opacity-0');
                letterModalContent.classList.add('opacity-0', '-translate-y-4');
                setTimeout(() => letterModal.classList.add('hidden'), 300);
            }

            function animateWriting(letter) {
                const container = d3.select("#writing-animation-container");
                container.html(""); 
                const svg = container.append("svg").attr("viewBox", "0 0 100 100").style("max-height", "12rem");
                const clipId = `clip-${Date.now()}`;
                svg.append("defs").append("clipPath").attr("id", clipId)
                    .append("rect").attr("x", 0).attr("y", 0).attr("width", 0).attr("height", 100);

                svg.append("text")
                    .attr("x", "50%").attr("y", "50%").attr("dominant-baseline", "middle")
                    .attr("text-anchor", "middle").attr("class", "telugu-char")
                    .attr("font-size", "80px").attr("fill", "var(--primary-color)")
                    .attr("clip-path", `url(#${clipId})`).text(letter);

                svg.select(`#${clipId} rect`).transition().duration(1500)
                    .ease(d3.easeLinear).attr("width", 100);
            }

            return { init, navigateTo, showLetterModal };
        })();
        
        // =================================================================================
        // IV. FEATURE MODULES
        // =================================================================================

        const LearnModule = {
            render(state, subView = 'alphabet') {
                const learnView = document.getElementById('learn-view');
                const currentSubView = learnView.querySelector('.sub-tab-btn.active')?.dataset.learnView || subView;
                learnView.innerHTML = `
                    <div id="learn-sub-nav" class="flex justify-center mb-6 bg-gray-200 rounded-lg p-1">
                        <button data-learn-view="alphabet" class="sub-tab-btn font-semibold py-2 px-4 rounded-md w-1/3 ${currentSubView === 'alphabet' ? 'active' : ''}">Alphabet</button>
                        <button data-learn-view="gunintalu" class="sub-tab-btn font-semibold py-2 px-4 rounded-md w-1/3 ${currentSubView === 'gunintalu' ? 'active' : ''}">Gunintalu</button>
                        <button data-learn-view="vottulu" class="sub-tab-btn font-semibold py-2 px-4 rounded-md w-1/3 ${currentSubView === 'vottulu' ? 'active' : ''}">Vottulu</button>
                    </div>
                    <div id="learn-grid" class="grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-3"></div>`;
                
                const dataSet = AppData[currentSubView];
                const grid = document.getElementById('learn-grid');
                grid.innerHTML = dataSet.map(item => {
                    const itemKey = `${item.type}_${item.transliteration}`;
                    const status = state.letterStates[itemKey] || 'none';
                    const displayChar = item.type === 'gunintalu' ? item.telugu.split('=')[1].trim() : item.telugu;
                    return `<div data-item-key="${itemKey}" class="item-card status-indicator status-${status} bg-white rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer p-2 flex flex-col items-center justify-center aspect-square">
                            <span class="text-3xl md:text-4xl telugu-char">${displayChar}</span>
                            <span class="text-xs text-gray-500">${item.transliteration}</span></div>`;
                }).join('');
                
                learnView.querySelector('#learn-sub-nav').addEventListener('click', (e) => {
                    if (e.target.matches('[data-learn-view]')) this.render(state, e.target.dataset.learnView);
                });

                grid.addEventListener('click', (e) => {
                    const card = e.target.closest('.item-card');
                    if (card) {
                        const key = card.dataset.itemKey;
                        const [type, transliteration] = key.split('_');
                        let dataSetKey = type === 'vowel' || type === 'consonant' ? 'alphabet' : type;
                        const itemData = AppData[dataSetKey]?.find(i => i.transliteration === transliteration);
                        if (itemData) ui.showLetterModal(itemData, key);
                    }
                });
            }
        };

        const ProgressModule = {
            render(state) {
                const progressView = document.getElementById('progress-view');
                if (!state) return;
                const calcProgress = (typeKey) => {
                    const items = AppData[typeKey] || [];
                    const total = items.length;
                    let confident = 0, gettingThere = 0, notSure = 0;
                    items.forEach(item => {
                        const status = state.letterStates[`${item.type}_${item.transliteration}`];
                        if (status === 'confident') confident++;
                        else if (status === 'getting-there') gettingThere++;
                        else if (status === 'not-sure') notSure++;
                    });
                    const percent = total > 0 ? Math.round(((confident + gettingThere * 0.5) / total) * 100) : 0;
                    return { percent, confident, gettingThere, notSure, total };
                };
                progressView.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-xl shadow-md">
                        <h3 class="font-bold text-xl mb-4">Learning Progress</h3>
                        ${createProgressBar('Alphabet', calcProgress('alphabet'))}
                        ${createProgressBar('Gunintalu', calcProgress('gunintalu'))}
                        ${createProgressBar('Vottulu', calcProgress('vottulu'))}
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-md">
                        <h3 class="font-bold text-xl mb-4">Achievements</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                            ${Object.values(state.achievements || AppData.achievements).map(ach => `
                                <div class="achievement ${ach.unlocked ? 'unlocked' : ''} text-center p-2">
                                    <div class="text-4xl">${ach.icon}</div>
                                    <p class="font-semibold text-sm mt-1">${ach.title}</p>
                                    <p class="text-xs text-gray-500">${ach.desc}</p>
                                </div>`).join('')}
                        </div>
                    </div>
                </div>`;
                function createProgressBar(title, data) {
                    return `<div class="mb-4">
                        <div class="flex justify-between items-end mb-1"><p class="font-semibold">${title}</p><p class="text-sm font-bold text-blue-600">${data.percent}% Mastered</p></div>
                        <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden flex">
                            <div class="bg-green-500 h-4" style="width: ${data.total > 0 ? (data.confident/data.total)*100 : 0}%"></div>
                            <div class="bg-amber-500 h-4" style="width: ${data.total > 0 ? (data.gettingThere/data.total)*100 : 0}%"></div>
                            <div class="bg-red-500 h-4" style="width: ${data.total > 0 ? (data.notSure/data.total)*100 : 0}%"></div>
                        </div></div>`;
                }
            }
        };
        
        const PracticeModule = {
            render() {
                document.getElementById('practice-view').innerHTML = `<div class="bg-white p-6 rounded-xl shadow-md text-center"><h3 class="font-bold text-xl mb-4">Practice Zone</h3><p class="text-gray-600">The interactive quiz and writing pad are coming soon!</p><div class="mt-4 p-8 bg-gray-100 rounded-lg"><span class="text-6xl telugu-char"></span><p class="mt-2 font-semibold">Get ready to test your skills!</p></div></div>`;
            }
        };
        
        // FINAL FIX: This AudioController uses the browser's native speech synthesis.
        // It's more reliable, has no cloud dependencies, and waits for voices to be ready.
        const AudioController = {
            teluguVoice: null,
            isReady: false,
            
            init() {
                return new Promise((resolve) => {
                    if (!('speechSynthesis' in window)) {
                        console.error("Speech Synthesis not supported.");
                        this.isReady = false;
                        return resolve(this);
                    }

                    const loadVoices = () => {
                        const voices = speechSynthesis.getVoices();
                        if (voices.length > 0) {
                            this.teluguVoice = voices.find(v => v.lang === 'te-IN');
                            if (this.teluguVoice) {
                                this.isReady = true;
                                console.log("Telugu voice found and ready.");
                            } else {
                                console.warn("Telugu (te-IN) voice not found in browser.");
                            }
                            return resolve(this);
                        }
                    };

                    loadVoices();
                    if (speechSynthesis.onvoiceschanged !== undefined) {
                        speechSynthesis.onvoiceschanged = loadVoices;
                    }
                    setTimeout(() => {
                        if (!this.isReady) {
                             console.warn("Voice loading timed out.");
                             resolve(this); // Resolve anyway so the app doesn't hang
                        }
                    }, 2500);
                });
            },
            
            vibrate() { 
                if (navigator.vibrate) navigator.vibrate(50); 
            },

            speak(text) {
                if (!this.isReady || !this.teluguVoice) {
                    console.error("Audio is not ready or Telugu voice is not available.");
                    return;
                }
                
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.voice = this.teluguVoice;
                utterance.lang = 'te-IN';
                utterance.rate = 0.8;
                
                speechSynthesis.cancel();
                speechSynthesis.speak(utterance);
            }
        };

        const Onboarding = {
            init(state, firebase) {
                if (state && !state.onboardingComplete) {
                    const overlay = document.getElementById('onboarding-overlay');
                    const modal = document.getElementById('onboarding-modal');
                    const closeBtn = document.getElementById('close-onboarding');
                    overlay.classList.remove('hidden');
                    setTimeout(() => { overlay.classList.remove('opacity-0'); modal.classList.remove('opacity-0', 'scale-95'); }, 10);
                    closeBtn.onclick = () => {
                        firebase.completeOnboarding();
                        overlay.classList.add('opacity-0');
                        modal.classList.add('opacity-0', 'scale-95');
                        setTimeout(() => overlay.classList.add('hidden'), 300);
                    };
                }
            }
        };

        main();

    </script>



</body></html>